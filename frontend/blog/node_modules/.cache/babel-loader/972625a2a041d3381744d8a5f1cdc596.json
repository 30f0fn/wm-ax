{"ast":null,"code":"var _jsxFileName = \"/home/mw/cs/blog/frontend/blog/src/views/new_post.js\";\nimport React, { Component } from 'react';\nimport { Helmet } from 'react-helmet'; // import striptags from 'striptags';\n// import Fetchers from '../utilities/fetchers.js';\n// import {ExtendingList, ProfileMini} from '../../components/extending-list.js';\n// import {RecommendationsSidebar, RecommendationsSidebarPanel, CommunityMini, TopicMini} from '../../components/recommendations-sidebar.js';\n// import {TruncateHtml} from '../../utilities/formatting.js';\n// import {settings, api} from '../settings.js';\n\nconst API_URL = `http://localhost:8000/api/article`;\nconst ARTICLE = {\n  'slug': 'test-slug',\n  'content': 'this is an article about crap'\n};\n\nclass NewPost extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  submitPost() {\n    const url = `${API_URL}`;\n    const request_info = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(ARTICLE)\n    };\n    fetch(url, request_info).then(response => response.json()).then(data => {\n      console.log('Success:', data);\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n  }\n\n  getPosts() {\n    const url = 'http://localhost:8000/api/article';\n    fetch(url).then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw new Error(\"WTF\");\n      }\n    }).then(data => this.setState({\n      latest_posts: data\n    })).catch(error => this.setState({\n      error\n    }));\n  }\n\n  componentDidMount() {\n    this.submitPost();\n  }\n\n  render() {\n    // this.submitPost();\n    const {\n      latest_posts\n    } = this.state;\n\n    if (!latest_posts) {\n      return \"no latest posts\";\n      return JSON.stringify(this.state);\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Helmet, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"meta\", {\n      charSet: \"utf-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, \"MMW - Latest Posts\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cf fl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"fl w-90 pr2 justify-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"latest_posts\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }, \"latest posts\"), /*#__PURE__*/React.createElement(\"ol\", {\n      className: \"list pl0 mt2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, latest_posts.map(post => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"post_mini\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 35\n      }\n    }, post.title), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 35\n      }\n    }, post.content)))))), \";\")));\n  }\n\n}\n\nexport default NewPost;","map":{"version":3,"sources":["/home/mw/cs/blog/frontend/blog/src/views/new_post.js"],"names":["React","Component","Helmet","API_URL","ARTICLE","NewPost","constructor","props","state","submitPost","url","request_info","method","headers","body","JSON","stringify","fetch","then","response","json","data","console","log","catch","error","getPosts","ok","Error","setState","latest_posts","componentDidMount","render","map","post","title","content"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {Helmet} from 'react-helmet';\n\n// import striptags from 'striptags';\n\n// import Fetchers from '../utilities/fetchers.js';\n\n// import {ExtendingList, ProfileMini} from '../../components/extending-list.js';\n// import {RecommendationsSidebar, RecommendationsSidebarPanel, CommunityMini, TopicMini} from '../../components/recommendations-sidebar.js';\n\n// import {TruncateHtml} from '../../utilities/formatting.js';\n\n// import {settings, api} from '../settings.js';\n\nconst API_URL = `http://localhost:8000/api/article`;\n\nconst ARTICLE = {'slug': 'test-slug', 'content': 'this is an article about crap'};\n\nclass NewPost extends Component {\n\n     constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    submitPost() {\n        const url = `${API_URL}`;\n        const request_info = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(ARTICLE),\n        };\n        fetch(url, request_info)\n            .then(response => response.json())\n            .then(data => {\n                console.log('Success:', data);\n            })\n            .catch((error) => {\n                console.error('Error:', error);\n            });\n    }\n    \n    getPosts() {\n        const url = 'http://localhost:8000/api/article';\n        fetch(url)\n            .then(response => {\n                if (response.ok) {\n                    return response.json();\n                } else {\n                    throw new Error(\"WTF\");\n                }\n            })\n            .then(data => this.setState({latest_posts: data}))\n            .catch(error => this.setState({ error }));\n    }\n\n\n    componentDidMount() {\n        this.submitPost();\n    }\n\n    render() {\n        // this.submitPost();\n        const {latest_posts\n              }\n              = this.state;\n        if (!latest_posts) {\n            return \"no latest posts\";\n            return JSON.stringify(this.state);\n        }\n        return (\n            <div className=\"page\">\n              <Helmet>\n                <meta charSet=\"utf-8\" />\n                <title>MMW - Latest Posts</title>\n              </Helmet>\n              <hr/>\n              <div className=\"cf fl\">\n                <div className=\"fl w-90 pr2 justify-center\">\n                  <div className=\"latest_posts\">\n                    <h2>latest posts</h2>\n                    <ol className=\"list pl0 mt2\">\n                      {latest_posts.map(\n                          (post) =>\n                              <div className=\"post_mini\">\n                                <li>\n                                  <h3>\n                                    {post.title}\n                                  </h3>\n                                  <p>\n                                    {post.content}\n                                  </p>\n                                </li>\n                              </div>\n                      )}\n                    </ol>\n                  </div>;\n\n                </div>\n              </div>\n            </div>\n        );\n    }\n}\n\n\n\nexport default NewPost;\n"]},"metadata":{},"sourceType":"module"}